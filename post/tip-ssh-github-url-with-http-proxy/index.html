<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <title>[Tip] Github SSH주소를 HTTP Proxy로 접근하기 - Lunatine&#39;s Box</title>
    
    <meta name="description" content="본 문서는 Linux 사설 환경에서 HTTP/HTTPS Proxy를 이용해서 git SSH 접근을 이용하는 방법에 대해서 소개하고 있습니다.  Github 원격 저장소로 유명한 github. 이 사이트를 통해서 작업을 할 때 HTTPS 주소로 접근하면(remote로 설정하면) push 등의 작업을 할 때 마다 인증을 해야하는 번거로움 때문에 꽤나 많은 분들이 SSH Key 방식의 인증을 선호하곤 한다.
물론 credential cache를 이용하면 HTTPS 인증이 좀 더 수월하며 이에 대한 내용은 이 문서를 참고하면 된다.
HTTP/S Proxy 일반적으로 사설IP 환경에서 외부 웹 페이지를 접근하기 위해서 HTTP Proxy를 사용하여 접근한다.">
    <meta name="author" content="Lunatine">
    
    <link href="css/github-gist.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    
    <link rel="apple-touch-icon" href="img/apple-touch-icon.png">
    <link rel="icon" href="img/favicon.ico">
    
    <meta name="generator" content="Hugo 0.55.6" />
    
    <link rel="alternate" type="application/atom+xml" href="index.xml" title="Lunatine&#39;s Box">
    
    
    
  </head>
  <body class="single">
    <header class="header">
      <div class="wrap">
        
        <p class="logo"><a href="">Lunatine&#39;s Box</a></p>
        
        
        <button class="menu-toggle" type="button"></button>
        
      </div>
    </header>
    
    <nav class="nav">
      <ul class="menu">
        
        <li>
          <a href="/about">About</a>
        </li>
        
        <li>
          <a href="/showcase">Showcase</a>
        </li>
        
      </ul>
    </nav>
    
    <main class="main">


<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">[Tip] Github SSH주소를 HTTP Proxy로 접근하기</h1>
    <div class="post-meta">Lunatine · 2015.8.12</div>
  </header>
  <div class="post-content">

<ul>
<li>본 문서는 Linux 사설 환경에서 HTTP/HTTPS Proxy를 이용해서 git SSH 접근을 이용하는 방법에 대해서 소개하고 있습니다.</li>
</ul>

<h2 id="github">Github</h2>

<p>원격 저장소로 유명한 github. 이 사이트를 통해서 작업을 할 때 HTTPS 주소로 접근하면(remote로 설정하면) push 등의 작업을 할 때 마다 인증을 해야하는 번거로움 때문에 꽤나 많은 분들이 SSH Key 방식의 인증을 선호하곤 한다.</p>

<p>물론 credential cache를 이용하면 HTTPS 인증이 좀 더 수월하며 이에 대한 내용은 <a href="https://help.github.com/articles/caching-your-github-password-in-git/">이 문서</a>를 참고하면 된다.</p>

<h2 id="http-s-proxy">HTTP/S Proxy</h2>

<p>일반적으로 사설IP 환경에서 외부 웹 페이지를 접근하기 위해서 HTTP Proxy를 사용하여 접근한다. 따라서, 사설IP 환경에서 SSH Key 방식의 인증으로 github을 사용하려면 SOCKS Proxy가 필요한데 경우에 따라서는 이런 Proxy가 제공되지 않을 때가 많다. 본 문서에서는 HTTP/HTTPS Proxy만 제공되는 사설환경에서 github을 SSH 방식으로 접근하는 방법을 소개하고자 한다.</p>

<h2 id="해결방안">해결방안</h2>

<p>생각보다 간단하다. 기본적으로 대부분 HTTP/HTTPS Proxy도 SOCKS Proxy와 크게 다르지 않게 데이터를 포워딩하는 형태이기 때문에 git이 SSH 기반 주소를 접근할 때 HTTP/HTTPS Proxy를 이용하도록 넘겨주기만 하면 된다.</p>

<p>하지만, 보통 http/https Proxy를 Linux에서 범용으로 사용할 때 http_proxy, https_proxy 환경변수를 이용하는데 이는 git이 https 주소를 접근할 때나 사용하지 ssh 주소를 접근할 때는 이용하지 않는다. 그렇기 때문에 아래와 같은 설정을 추가해주면 된다.</p>

<p>먼저 홈디렉토리 아래에 ssh client config 파일을 편집기로 연다. ($HOME/.ssh/config)</p>

<pre><code>$ vim ~/.ssh/config
</code></pre>

<p>그리고, 아래 내용을 설정파일에 추가해 준다.</p>

<pre><code>Host github.com
   ProxyCommand          nc -X connect -x 서버주소:포트번호 %h %p
   ServerAliveInterval   10
</code></pre>

<p>서버주소와 포트번호에는 HTTP Proxy의 주소와 포트번호를 넣는다. (프로토콜 지시자는 생략한다. 예를들면 example.com:3128 형식)</p>

<p>ssh client 설정으로 위와 같은 proxy 명령을 추가하면 시스템 엔지니어의 맥가이버 칼과 같은 nc(netcat)가 git이 시도하는 ssh 접속을 HTTP Proxy 서버로 넘겨준다. 이렇게해서 별다른 문제 없이 외부에 있는 github 서버에 SSH Key 방식으로 인증하고 접근 할 수 있다.</p>

<h2 id="결론은">결론은..</h2>

<p>허무할 정도로 간단한 위 내용은 사실 git/github에 대한 Tip이라기 보다 nc의 활용방안 중 하나인 내용이다. 나중에 시간이 된다면 여러가지 작업을 할 수 있는 nc에 대해서 상세히 소개해 보려고 한다. 끝.</p>
</div>
  <footer class="post-footer">
    
    <ul class="post-tags">
      
      <li><a href="tags/git/">git</a></li>
      
      <li><a href="tags/http-proxy/">http proxy</a></li>
      
      <li><a href="tags/proxy/">proxy</a></li>
      
      <li><a href="tags/ssh/">ssh</a></li>
      
      <li><a href="tags/key/">key</a></li>
      
      <li><a href="tags/github/">github</a></li>
      
      <li><a href="tags/nc/">nc</a></li>
      
      <li><a href="tags/netcat/">netcat</a></li>
      
    </ul>
    
  </footer>
  
  
  
  <div id="disqus_thread"></div>
  <script>
    var disqus_shortname = 'lunatine';
    (function() {
      var d = document, s = d.createElement('script');
      s.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>
    Please enable JavaScript to view the
    <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
  </noscript>
  
  
  
</article>

</main>
<footer class="footer">
  <span>&copy; 2019 <a href="">Lunatine&#39;s Box</a></span>
  <span>&middot;</span>
  <span>Powered by <a href="https://gohugo.io/" rel="noopener" target="_blank">Hugo️️</a>️</span>
  <span>&middot;</span>
  <span>Theme️ <a href="https://github.com/nanxiaobei/hugo-paper" rel="noopener" target="_blank">Paper</a></span>
</footer>
<script src="js/instantclick.min.js" data-no-instant></script>
<script data-no-instant>InstantClick.init();</script>
<script src="js/highlight.min.js" data-no-instant></script>
<script data-no-instant>
  let body;
  function menuToggleListener() {
    body.classList.toggle('blur');
  }
  function setMenuToggleListener() {
    const menuToggle = document.querySelector('.menu-toggle');
    if (!menuToggle) return;
    body = document.querySelector('body');
    menuToggle.addEventListener('click', menuToggleListener);
  }

  hljs.initHighlightingOnLoad();
  setMenuToggleListener();

  InstantClick.on('change', function () {
    document.querySelectorAll('pre code').forEach((block) => {
      hljs.highlightBlock(block);
    });
    setMenuToggleListener();
  });
</script>
</body>
</html>

